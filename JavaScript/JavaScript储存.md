# cookie、session、localStorage、sessionStorage区别

| 特性           | cookie                                                       | session | localStorage           | sessionStorage                   |
| -------------- | ------------------------------------------------------------ | ------- | ---------------------- | -------------------------------- |
| 由谁初始化     | 客户端或服务器，服务器使用 `Set-Cookie` 请求头               |         | 客户端                 | 客户端                           |
| 数据的生命周期 | 一般由服务器生成，可设置失效时间；也可以由浏览器生成，默认是关闭浏览器后失效 |         | 永久保存，清理缓存失效 | 仅在当前会话有效，关闭页面后清除 |
| 存放数据大小   | 4KB                                                          |         | 5MB                    | 5MB                              |
| 用途           | 一般由服务器生成，用于标识用户身份                           |         | 用于浏览器缓存数据     | 用于浏览器缓存数据               |
| 访问权限       | 任意窗口                                                     |         | 任意窗口               | 当前页面窗口                     |

- sessionStorage的有效期是和存储数据脚本所在的最顶层的窗口或者是浏览器标签是一样的，一旦窗口或者标签页被永久关闭了，存储的数据也就失效了。
- localStorage的作用域是限定在文档源级别的。文档源通过协议、主机名以及端口三者来确定。

## sessionStorage

- 页面会话在浏览器打开期间一直保持，并且重新加载或恢复页面仍会保持原来的页面会话。
- **在新标签或窗口打开一个页面时会复制顶级浏览会话的上下文作为新会话的上下文，**这点和 session cookies 的运行方式不同。
- 打开多个相同的URL的Tabs页面，会创建各自的`sessionStorage`。
- 关闭对应浏览器窗口（Window）/ tab，会清除对应的`sessionStorage`。 