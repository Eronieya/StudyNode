# 事件循环机制

## 宏任务(macro-task、task)

包括 **script**, **setTimeout**, **setInterval**, **setImmediate**, **I/O**, **UI rendering**

## 微任务(micro-task、jobs)

包括 **process.nextTick**(nodejs), **Promise(then, catch)**, **Object.observe**(弃用), **MutationObserver**(h5新特性)

- 来自不同任务源的任务会进入到不同的任务队列。



事件循环的顺序，决定了 Javascript 代码的执行顺序。

1. 从 script 开始第一次循环
2. 全局上下文进入函数调用栈，直至调用栈清空。
3. 执行所有的 micro-task，所有的 micro-task 执行完毕
4. 循环再次从 macro-task 开始，找到其中一个任务队列执行，再执行所有的 micro-task



promise 回调函数不进入队列

